generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model blood_inventory {
  id          Int        @id @default(autoincrement())
  blood_type  String?    @db.VarChar
  donated_at  DateTime?  @db.Timestamp(6)
  expiry_date DateTime?  @db.Timestamp(6)
  hospital_id Int?
  hospitals   hospitals? @relation(fields: [hospital_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([blood_type], map: "ix_blood_inventory_blood_type")
  @@index([expiry_date], map: "ix_blood_inventory_expiry_date")
  @@index([id], map: "ix_blood_inventory_id")
}

model hospitals {
  id              Int               @id @default(autoincrement())
  name            String?           @unique(map: "ix_hospitals_name") @db.VarChar
  location        String?           @db.VarChar
  blood_inventory blood_inventory[]
  users           users[]

  @@index([id], map: "ix_hospitals_id")
}

model users {
  id              Int        @id @default(autoincrement())
  email           String?    @unique(map: "ix_users_email") @db.VarChar
  hashed_password String?    @db.VarChar
  role            userrole?
  hospital_id     Int?
  hospitals       hospitals? @relation(fields: [hospital_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([id], map: "ix_users_id")
}

enum userrole {
  HOSPITAL_STAFF
  REGULATOR
  ADMIN
}
